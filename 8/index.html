<!doctype html>
<meta charset="utf-8" />
<style>
    body {
        margin: 0;
        overflow: hidden;
        position: fixed;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
    }

    svg {
        position: absolute;
        left: 50%;
        top: 50%;
        overflow: visible;
    }
</style>

<svg></svg>

<script src="../d3/d3.min.js"></script>
<script>
    "use strict";
    var gap = 50;
    var svg = d3.select("svg")
        .attr("width", 100)
        .attr("height", 100)
    function Arrow(cx, cy) {
        this.r = 20;
        this.e = 0.5;
        this.rotate = 0;
        this.cx = cx * gap;
        this.cy = cy * gap;
        this.arrow = svg.append("g");
        var path = d3.path();
        path.moveTo(this.cx + this.r, this.cy);
        path.lineTo(this.cx, this.cy + this.e * this.r);
        path.lineTo(this.cx, this.cy - this.e * this.r);
        path.closePath();
        this.arrow.append("path")
            .attr("d", path.toString())
            .style("fill", "red");
        path = d3.path();
        path.moveTo(this.cx - this.r, this.cy);
        path.lineTo(this.cx, this.cy + this.e * this.r);
        path.lineTo(this.cx, this.cy - this.e * this.r);
        path.closePath();
        this.arrow.append("path")
            .attr("d", path.toString())
            .style("fill", "blue");
        this.arrow.append("circle")
            .attr("cx", this.cx)
            .attr("cy", this.cy)
            .attr("r", 3)
            .style("stroke", "aqua")
            .style("fill", "black")
        this.arrow.attr("transform", "rotate(" + this.rotate + "," + this.cx + " " + this.cy + ")");
    }

    Arrow.prototype.setFace = function (x, y) {
        if (Math.abs(this.cx) > window.screen.width / 2 + this.r / 2 || Math.abs(this.cy) > window.screen.height / 2 + this.r / 2) {
            return;
        }
        var dx = x - this.cx;
        var dy = y - this.cy;
        if (dx > -1 && dx < 1 && dy > -1 && dy < 1) {
            return;
        }
        this.rotate = Math.atan((y - this.cy) / (x - this.cx)) / Math.PI * 180;
        if (dx < 0) {
            this.rotate += 180;
        }
        this.arrow.attr("transform", "rotate(" + this.rotate + "," + this.cx + " " + this.cy + ")");
    }

    var Arrows = [];

    for (var i = -Math.floor(window.screen.width / 2 / gap); i <= Math.floor(window.screen.width / 2 / gap); i++) {
        for (var j = -Math.floor(window.screen.height / 2 / gap); j <= Math.floor(window.screen.height / 2 / gap); j++) {
            Arrows.push(new Arrow(i, j));
        }
    }

    function towards(event) {
        Arrows.forEach(function (a) {
            a.setFace(event.clientX - window.innerWidth / 2, event.clientY - window.innerHeight / 2);
        })
    }
    document.body.onmousemove = towards;

</script>